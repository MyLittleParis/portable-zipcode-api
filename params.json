{"name":"Portable-zipcode-api","tagline":"Easy, portable, self-hosting Japan postal code API","body":"Portable ZipCode API\r\n====================\r\n\r\nEasy, portable, self-hosting Japan postal code API\r\n\r\nRequirements\r\n-------------------------------------------------------------------------------------------------------\r\n\r\n* PHP5.3.3 or later\r\n* SQLite support (maybe installed on default PHP build)\r\n* Latest jQuery\r\n\r\nInstallation\r\n-------------------------------------------------------------------------------------------------------\r\n\r\n* Download [portable-zip-api.zip](http://kzykhys.github.com/portable-zipcode-api/releases/portable-zip-api.zip)\r\n* Extract archive\r\n* Upload zip.phar.php and zip.sqlite.db to same directory on your web server (eg. `http://www.example.com/API/zip.phar.php`)\r\n\r\nIf you prefer clean URLs, you'll need mod_rewrite and .htaccess files like this:\r\n\r\n```\r\n<IfModule mod_rewrite.c>\r\n    RewriteEngine On\r\n    #RewriteBase /path/to/app\r\n    RewriteCond %{REQUEST_FILENAME} !-f\r\n    RewriteRule ^ zip.phar.php [L]\r\n</IfModule>\r\n```\r\n\r\nAPI Reference\r\n-------------------------------------------------------------------------------------------------------\r\n\r\n### General notes\r\n\r\n* Every string passed to and from the API needs to be UTF-8 encoded.\r\n* You can rename `zip.phar.php` to anything you like.\r\n\r\n-------------------------------------------------------------------------------------------------------\r\n\r\n### `/version` Get version\r\n\r\n#### URL\r\n\r\n```\r\nGET /zip.phar.php/version\r\n```\r\n\r\n#### Return value\r\n\r\nAn object with mime type 'application/json'\r\n\r\n``` json\r\n{\r\n    \"version\": \"1.0.0\"\r\n}\r\n```\r\n\r\n-------------------------------------------------------------------------------------------------------\r\n\r\n### `/api` Get Javascript API\r\n\r\n#### URL\r\n\r\n```\r\nGET /zip.phar.php/api\r\n```\r\n\r\n#### Return value\r\n\r\nThe content of Javascript API with mime type 'text/javascript'\r\n\r\n-------------------------------------------------------------------------------------------------------\r\n\r\n### `/search/{code}.{format}` Find an address by zip-code\r\n\r\n#### URL\r\n\r\n```\r\nGET  /zip.phar.php/search/{code}\r\nGET  /zip.phar.php/search/{code}.{format}\r\nPOST /zip.phar.php/search\r\n```\r\n\r\n#### Arguments\r\n\r\n* **code** *(string/integer)* The code to search (9999999/999-9999)\r\n* **format** *(string)* The format (json|xml|php) Default:json\r\n\r\n#### Return value\r\n\r\n##### Format: json\r\n\r\nAn object with mime type 'application/json'\r\n\r\n``` json\r\n{\r\n    \"result\": true,\r\n    \"data\": {\r\n        \"id\":   \"38201\",\r\n        \"code\": \"1600022\",\r\n        \"pref\": \"\\u6771\\u4eac\\u90fd\",\r\n        \"city\": \"\\u65b0\\u5bbf\\u533a\",\r\n        \"town\": \"\\u65b0\\u5bbf\"\r\n    }\r\n}\r\n```\r\n\r\n#### Format: xml\r\n\r\nA xml document with mime type 'application/xml'\r\n\r\n``` xml\r\n<?xml version=\"1.0\"?>\r\n<response>\r\n    <result>1</result>\r\n    <data>\r\n        <id>38201</id>\r\n        <code>1600022</code>\r\n        <pref>&#x6771;&#x4EAC;&#x90FD;</pref>\r\n        <city>&#x65B0;&#x5BBF;&#x533A;</city>\r\n        <town>&#x65B0;&#x5BBF;</town>\r\n    </data>\r\n</response>\r\n```\r\n\r\n##### Format: php\r\n\r\nA PHP [serialized](http://www.php.net/manual/en/function.serialize.php) string with mime type 'text/plain'\r\n\r\n```\r\na:2:{s:6:\"result\";b:1;s:4:\"data\";a:5:{s:4:\"city\";s:9:\"新宿区\";s:4:\"code\";s:7:\"1600022\";s:2:\"id\";s:5:\"38201\";s:4:\"pref\";s:9:\"東京都\";s:4:\"town\";s:6:\"新宿\";}}\r\n```\r\n\r\nJavaScript API\r\n-------------------------------------------------------------------------------------------------------\r\n\r\n### Configure and Paste the code above\r\n\r\n``` html\r\n<script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js\"></script>\r\n<script src=\"/path/to/zip.phar.php/api\" type=\"text/javascript\"></script>\r\n```\r\n\r\n### Call the API through jQuery\r\n\r\n``` javascript\r\n$.zipSearch('950-2014').done(function(json) {\r\n    if (json.result) {\r\n        console.log(json.data.pref);\r\n        console.log(json.data.city);\r\n        console.log(json.data.town);\r\n    } else {\r\n        console.log('Address not found for code: ' + json.data.code);\r\n    }\r\n});\r\n```\r\n\r\nUpdate address database\r\n-------------------------------------------------------------------------------------------------------\r\n\r\n### Download full source code from repository\r\n\r\n``` sh\r\n$ git clone https://github.com/kzykhys/portable-zipcode-api.git zipapi\r\n$ cd zipapi\r\n```\r\n\r\n### Install dependencies via Composer\r\n\r\n``` sh\r\n$ curl -sS https://getcomposer.org/installer | php\r\n$ php composer.phar install\r\n```\r\n\r\n### Download CSV (Lzh archive) from official website\r\n\r\nDownload lzh archive from [http://www.post.japanpost.jp/zipcode/dl/kogaki.html](http://www.post.japanpost.jp/zipcode/dl/kogaki.html)\r\n\r\nor just run\r\n\r\n``` sh\r\n$ php app/console.php csv:download\r\n```\r\n\r\n### Extract Lzh archive\r\n\r\nIf you have lha command, just type\r\n\r\n``` sh\r\n$ cd ./csv\r\n$ find . -type f -exec lha x {} \\;\r\n```\r\n\r\n### Setup database\r\n\r\n``` sh\r\n$ php app/console.php csv:import ./csv\r\n```\r\n\r\n### Rebuild phar archive\r\n\r\n``` sh\r\n$ php app/console.php build:phar\r\n```\r\n\r\nAuthor\r\n-------------------------------------------------------------------------------------------------------\r\n\r\nKazuyuki Hayashi (@kzykhys)\r\n\r\nLICENSE\r\n-------------------------------------------------------------------------------------------------------\r\n\r\nThe MIT License","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}